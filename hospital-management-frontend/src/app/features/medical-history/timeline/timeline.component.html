<!-- Medical History Section (around line 172) -->
<div class="medical-history-section">
	<h3>Recent Medical History</h3>
	<div class="history-list" *ngIf="medicalHistories.length > 0; else noHistory">
		<div class="history-item" *ngFor="let history of medicalHistories.slice(0, 3)">
			<div class="history-content">
				<h4>{{ getHistoryTitle(history) }}</h4>
				<p class="history-description">{{ getHistoryDescription(history) }}</p>
				<!-- FIXED: Safe property access with date pipe -->
				<p class="history-date">
					{{ history.createdAt ? (history.createdAt | date:'mediumDate') : 'Date not available' }}
				</p>
			</div>
			<div class="history-icon">
				<mat-icon [class]="getHistoryIconClass(history)">{{ getHistoryIcon(history) }}</mat-icon>
			</div>
		</div>
	</div>
	<ng-template #noHistory>
		<div class="no-data">
			<mat-icon>medical_services</mat-icon>
			<p>No medical history available</p>
		</div>
	</ng-template>
</div>