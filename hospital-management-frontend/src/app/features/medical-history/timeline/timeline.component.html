<div class="medical-timeline-container" [class.dark-theme]="isDarkMode">
	<!-- Header Section -->
	<div class="timeline-header">
		<div class="header-content">
			<h2 class="timeline-title">
				<mat-icon>timeline</mat-icon>
				Medical History Timeline
			</h2>
			<p class="timeline-subtitle">Complete chronological view of your medical records</p>
		</div>
		<div class="header-actions">
			<app-theme-toggle></app-theme-toggle>
			<app-logout-button></app-logout-button>
		</div>
	</div>

	<!-- Loading State -->
	<div *ngIf="isLoading" class="loading-container">
		<mat-progress-bar mode="indeterminate"></mat-progress-bar>
		<div class="loading-content">
			<mat-icon class="loading-icon pulse-animation">timeline</mat-icon>
			<p>Loading your medical timeline...</p>
		</div>
	</div>

	<!-- Timeline Content -->
	<div *ngIf="!isLoading" class="timeline-content">
		<div class="container">

			<!-- Simple Timeline -->
			<div class="simple-timeline">
				<div *ngFor="let event of timelineEvents" class="timeline-event">
					<div class="timeline-marker" [style.background-color]="event.color">
						<mat-icon>{{ event.icon }}</mat-icon>
					</div>
					<div class="timeline-card medical-card">
						<div class="event-header">
							<div class="event-info">
								<h3 class="event-title">{{ event.title }}</h3>
								<span class="event-date">{{ formatDate(event.date) }}</span>
							</div>
						</div>

						<div class="event-content">
							<p class="event-description">{{ event.description }}</p>

							<!-- Additional Medical Data -->
							<div *ngIf="event.data" class="medical-data">
								<div class="data-grid">
									<div *ngIf="event.data.hasAsthma" class="condition-item">
										<mat-icon class="condition-icon">air</mat-icon>
										<span>Asthma</span>
									</div>
									<div *ngIf="event.data.hasDiabetes" class="condition-item">
										<mat-icon class="condition-icon">bloodtype</mat-icon>
										<span>Diabetes</span>
									</div>
									<div *ngIf="event.data.hasBloodPressure" class="condition-item">
										<mat-icon class="condition-icon">favorite</mat-icon>
										<span>Hypertension</span>
									</div>
									<div *ngIf="event.data.hasHeartDisease" class="condition-item">
										<mat-icon class="condition-icon">monitor_heart</mat-icon>
										<span>Heart Disease</span>
									</div>
								</div>
							</div>
						</div>

						<div class="event-actions">
							<button mat-button color="primary" (click)="viewEventDetails(event)">
								<mat-icon>visibility</mat-icon>
								View Details
							</button>
						</div>
					</div>
				</div>
			</div>

			<!-- Empty State -->
			<div *ngIf="timelineEvents.length === 0" class="empty-state">
				<mat-icon class="empty-icon">timeline</mat-icon>
				<h3>No Medical History Found</h3>
				<p>Your medical timeline will appear here as records are added.</p>
				<button mat-raised-button color="primary" class="add-record-button">
					<mat-icon>add</mat-icon>
					Add Medical Record
				</button>
			</div>

		</div>
	</div>
</div>